# Ask 队列（Web UI）

目标：在移动端也能稳定使用 Ask 的“排队/编辑/删除”，并且不会被恢复轮询刷新打断输入。

## UI 交互

- Ask 页新增“队列”面板（`<details>`）：
  - 显示 running/queued/error 计数
  - 每条队列项默认折叠（预览 3 行），展开后显示全文
  - `queued`：支持 **编辑** / **删除**
  - `error`：支持 **删除**
- 编辑体验（重点移动端）：
  - 进入编辑后显示 textarea + 保存/取消
  - 恢复轮询时不会强制重渲染队列面板，避免输入框失焦/光标跳动

## 前端逻辑调整

- `/send` 适配为 enqueue：前端不再依赖立即返回 `userMessage`，改为刷新队列并由恢复轮询拉取执行后的消息。
- 发送按钮：仅在“请求 in-flight”短暂禁用；thread busy 时仍可继续发送进入队列。
- 恢复轮询：每次 tick 同步刷新 `thread + messages + queue`，并且在 `thread 不 busy 且队列无 pending` 时停止。

